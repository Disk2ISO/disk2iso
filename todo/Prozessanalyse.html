<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>disk2iso Prozessanalyse - Workflow-Ablauf</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        th {
            background-color: #3498db;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
            border: 1px solid #2980b9;
        }
        td {
            padding: 10px;
            border: 1px solid #ddd;
            vertical-align: top;
        }
        .phase-header {
            background-color: #34495e;
            color: white;
            font-weight: bold;
            text-align: center;
            font-size: 1.1em;
        }
        .state {
            background-color: #ecf0f1;
            font-weight: bold;
            text-align: center;
        }
        .audio-cd {
            background-color: #e8f5e9;
        }
        .dvd-video {
            background-color: #e3f2fd;
        }
        .bd-video {
            background-color: #f3e5f5;
        }
        .data-disc {
            background-color: #fff3e0;
        }
        .step {
            margin: 5px 0;
        }
        .step-number {
            font-weight: bold;
            color: #2980b9;
        }
        .duration {
            color: #7f8c8d;
            font-style: italic;
            font-size: 0.9em;
        }
        .critical {
            color: #c0392b;
            font-weight: bold;
        }
        .optional {
            color: #27ae60;
        }
        .legend {
            margin: 20px 0;
            padding: 15px;
            background-color: white;
            border-left: 4px solid #3498db;
        }
        .legend-item {
            display: inline-block;
            margin-right: 20px;
            padding: 5px 10px;
        }
        .note {
            background-color: #fff9c4;
            padding: 10px;
            margin: 10px 0;
            border-left: 4px solid #fbc02d;
        }
        .arrow {
            text-align: center;
            font-size: 1.5em;
            color: #3498db;
        }
        .output-files {
            background-color: #f0f4f8;
            padding: 8px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        .loop-main {
            background-color: #e8f4f8;
            border-left: 4px solid #3498db;
            border-right: 4px solid #3498db;
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            vertical-align: middle;
            color: #2980b9;
        }
        .loop-inner {
            background-color: #e8f5e9;
            border-left: 3px solid #46f312;
            border-right: 3px solid #46f312;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            vertical-align: middle;
            color: #46f312;
        }
    </style>
</head>
<body>
    <h1>disk2iso Prozessanalyse - Kompletter Workflow-Ablauf</h1>
    
    <div class="legend">
        <h3>Legende</h3>
        <span class="legend-item data-disc">Daten-Disc</span>
        <span class="legend-item audio-cd">Audio-CD</span>
        <span class="legend-item dvd-video">DVD-Video</span>
        <span class="legend-item bd-video">Blu-ray Video</span>
    </div>

    <h2>Prozess-Ablauf (Schritt für Schritt)</h2>
    
    <table>
        <thead>
            <tr>
                <th style="width: 20px;">#</th>
                <th style="width: 200px;">State</th>
                <th colspan="15">Aufgaben</th>
            </tr>
        </thead>
        <tbody>
            <!-- INITIALISIERUNG -->
            <tr>
                <td>1</td>
                <td>INITIALIZING</td>
                <td rowspan="6"></td>
                <td colspan="14">System-Prüfung</td>
            </tr>
            <tr>
                <td>2</td>
                <td>INITIALIZING</td>
                <td colspan="14">Module laden</td>
            </tr>
            <tr>
                <td>3</td>
                <td>INITIALIZING</td>
                <td colspan="14">Core-Abhängigkeiten prüfen</td>
            </tr>
            <tr>
                <td>4</td>
                <td>WAITING_FOR_DRIVE</td>
                <td colspan="14">Suche nach optischem Laufwerk</td>
            </tr>
            <tr>
                <td>5</td>
                <td>DRIVE_DETECTED</td>
                <td colspan="14">Laufwerk-Bereitschaft prüfen</td>
            </tr>
            <tr>
                <td>6</td>
                <td>DRIVE_DETECTED</td>
                <td colspan="14">System-Informationen sammeln</td>
            </tr>
            
            <!-- MEDIEN-ERKENNUNG -->
            <tr>
                <td>7</td>
                <td>WAITING_FOR_MEDIA</td>
                <td rowspan="36" class="loop-main" title="Hauptschleife: Schritte 7-41 werden für jede Disc wiederholt">⟳</td>
                <td colspan="14">Prüfe ob Medium eingelegt</td>
            </tr>
            <tr>
                <td>8</td>
                <td>MEDIA_DETECTED</td>
                <td colspan="14">Warte auf Disc-Bereitschaft</td>
            </tr>
            <tr>
                <td>9</td>
                <td>ANALYZING</td>
                <td colspan="14">Auto-Mount entfernen</td>
            </tr>
            <tr>
                <td>10</td>
                <td>ANALYZING</td>
                <td colspan="14">Volume-Label extrahieren</td>
            </tr>
            <tr>
                <td>11</td>
                <td>ANALYZING</td>
                <td colspan="14">Temp-Verzeichnis zum Kopieren erstellen</td>
            </tr>
            <tr>
                <td>12</td>
                <td>ANALYZING</td>
                <td colspan="14">Disc-Typ erkennen</td>
            </tr>
            <tr>
                <td>13</td>
                <td>ANALYZING</td>
                <td class="data-disc" colspan="1" rowspan="7">Daten-Disk erkannt</td>
                <td rowspan="9"></td>
                <td class="audio-cd"  colspan="4">Audio-CD erkannt</td>
                <td class="dvd-video" colspan="4">Video-DVD erkannt</td>
                <td class="bd-video"  colspan="4">Video-BD erkannt</td>
            </tr>
            
            <!-- METADATA-ABFRAGE -->
            <tr>
                <td>14</td>
                <td>ANALYZING</td>
                <td class="audio-cd" colspan="4">Track Anzahl ermitteln</td>
                <td class="dvd-video" colspan="4">Content-Typ ermitteln</td>
                <td class="bd-video" colspan="4">Content-Typ ermitteln</td>
            </tr>
            <tr>
                <td>15</td>
                <td>ANALYZING</td>
                <td class="audio-cd"  colspan="4">MusicBrainz Query (Audio-CD)</td>
                <td class="dvd-video" colspan="4">TMDB Query (DVD-Video)</td>
                <td class="bd-video"  colspan="4">TMDB Query (BD-Video)</td>
            </tr>
            <tr>
                <td>16</td>
                <td>ANALYZING</td>
                <td class="audio-cd"  colspan="1" rowspan="4">Keine Treffer</td>
                <td class="audio-cd"  colspan="1">1 Release</td>
                <td class="audio-cd"  colspan="2">Mehrere Releases</td>
                <td class="dvd-video" colspan="1" rowspan="4">Keine Treffer</td>
                <td class="dvd-video" colspan="1">1 Release</td>
                <td class="dvd-video" colspan="2">Mehrere Releases</td>
                <td class="bd-video"  colspan="1" rowspan="4">Keine Treffer</td>
                <td class="bd-video"  colspan="1">1 Release</td>
                <td class="bd-video"  colspan="2">Mehrere Releases</td>
            </tr>
            <tr>
                <td>17</td>
                <td>ANALYZING</td>
                <td class="audio-cd"  colspan="3">Cover-Download</td>
                <td class="dvd-video" colspan="3">Cover-Download</td>
                <td class="bd-video"  colspan="3">Cover-Download</td>
            </tr>
            <tr>
                <td>18</td>
                <td>WAITING_FOR_METADATA</td>
                <td class="audio-cd"  colspan="1" rowspan="2">Direkte Verwendung</td>
                <td class="audio-cd"  colspan="2">User-Auswahl</td>
                <td class="dvd-video" colspan="1" rowspan="2">Direkte Verwendung</td>
                <td class="dvd-video" colspan="2">User-Auswahl</td>
                <td class="bd-video"  colspan="1" rowspan="2">Direkte Verwendung</td>
                <td class="bd-video"  colspan="2">User-Auswahl</td>
            </tr>
            <tr>
                <td>19</td>
                <td>WAITING_FOR_METADATA</td>
                <td class="audio-cd"  colspan="1">Ausgewählt</td>
                <td class="audio-cd"  colspan="1">TimeOut</td>
                <td class="dvd-video" colspan="1">Ausgewählt</td>
                <td class="dvd-video" colspan="1">TimeOut</td>
                <td class="bd-video"  colspan="1">Ausgewählt</td>
                <td class="bd-video"  colspan="1">TimeOut</td>
            </tr>
            <tr>
                <td>20</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1">Dateinamen initialisieren</td>
                <td class="audio-cd"  colspan="4">Dateinamen initialisieren</td>
                <td class="dvd-video" colspan="4">Dateinamen initialisieren</td>
                <td class="bd-video"  colspan="4">Dateinamen initialisieren</td>
            </tr>
            
            <!-- KOPIERVORGANG -->
            <tr>
                <td>21</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1">Speicherplatz prüfen</td>
                <td class="audio-cd"  colspan="4">Speicherplatz prüfen</td>
                <td class="dvd-video" colspan="4">Speicherplatz prüfen</td>
                <td class="bd-video"  colspan="4">Speicherplatz prüfen</td>
            </tr>
            <tr>
                <td>22</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1">Disc mit ddrescue oder dd kopieren</td>
                <td class="audio-cd loop-inner" colspan="1" rowspan="6" title="Track-Schleife: Schritte 21-26 für jeden Track">↻</td>
                <td class="audio-cd"  colspan="4">Track rippen (WAV)</td>
                <td class="dvd-video" colspan="4">VIDEO_TS mit dvdbackup kopieren</td>
                <td class="bd-video"  colspan="4">Disc mit ddrescue kopieren</td>
            </tr>
            <tr>
                <td>23</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1" rowspan="7"></td>
                <td class="audio-cd"  colspan="1" rowspan="2">MP3 Encoding</td>
                <td class="audio-cd"  colspan="2">MP3 Encoding mit ID3-Tags</td>
                <td class="audio-cd"  colspan="1" rowspan="2">MP3 Encoding</td>
                <td class="dvd-video" colspan="4" rowspan="7"></td>
                <td class="bd-video"  colspan="4" rowspan="7"></td>
            </tr>
            <tr>
                <td>24</td>
                <td>COPYING</td>
                <td class="audio-cd"  colspan="2">Cover in MP3 speichern</td>
            </tr>
            <tr>
                <td>25</td>
                <td>COPYING</td>
                <td class="audio-cd"  colspan="4">WAV-Datei löschen (Audio-CD)</td>
            </tr>
            <tr>
                <td>26</td>
                <td>COPYING</td>
                <td class="audio-cd" colspan="4">Fortschritt aktualisieren (Audio-CD)</td>
            </tr>
            <tr>
                <td>27</td>
                <td>COPYING</td>
                <td class="audio-cd" colspan="4">Für alle Tracks wiederholen</td>
            </tr>
            <tr>
                <td>28</td>
                <td>COPYING</td>
                <td rowspan="6">&nbsp;</td>
                <td class="audio-cd" colspan="1" rowspan="2">&nbsp;</td>
                <td class="audio-cd" colspan="2">Cover als folder.jpg kopieren</td>
                <td class="audio-cd" colspan="1" rowspan="2">&nbsp;</td>
            </tr>
            <tr>
                <td>29</td>
                <td>COPYING</td>
                <td class="audio-cd"  colspan="2">album.nfo erstellen</td>
            </tr>
            <tr>
                <td>30</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1">ISO-Größe validieren</td>
                <td class="audio-cd"  colspan="4">ISO aus Temp-Verzeichnis erstellen</td>
                <td class="dvd-video" colspan="4">ISO aus Temp-Verzeichnis erstellen</td>
                <td class="bd-video"  colspan="4">ISO aus Temp-Verzeichnis erstellen</td>
            </tr>
            <tr>
                <td>31</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1">MD5-Checksumme erstellen</td>
                <td class="audio-cd"  colspan="4">MD5-Checksumme erstellen</td>
                <td class="dvd-video" colspan="4">MD5-Checksumme erstellen</td>
                <td class="bd-video"  colspan="4">MD5-Checksumme erstellen</td>
            </tr>
            <tr>
                <td>32</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1">&nbsp;</td>
                <td class="audio-cd"  colspan="1">&nbsp;</td>
                <td class="audio-cd"  colspan="2">Archiv-Metadaten erstellen</td>
                <td class="audio-cd"  colspan="1">&nbsp;</td>
                <td class="dvd-video" colspan="1">&nbsp;</td>
                <td class="dvd-video" colspan="2">Archiv-Metadaten erstellen</td>
                <td class="dvd-video" colspan="1">&nbsp;</td>
                <td class="bd-video"  colspan="1">&nbsp;</td>
                <td class="bd-video"  colspan="2">Archiv-Metadaten erstellen</td>
                <td class="bd-video"  colspan="1">&nbsp;</td>
            </tr>
            <tr>
                <td>33</td>
                <td>COPYING</td>
                <td class="data-disc" colspan="1">Temp-Verzeichnis löschen</td>
                <td class="audio-cd"  colspan="4">Temp-Verzeichnis löschen</td>
                <td class="dvd-video" colspan="4">Temp-Verzeichnis löschen</td>
                <td class="bd-video"  colspan="4">Temp-Verzeichnis löschen</td>
            </tr>
                        
            <!-- ABSCHLUSS (GEMEINSAM) -->
            <tr>
                <td>34</td>
                <td>COPYING</td>
                <td colspan="14">Kopier-Log abschließen</td>
            </tr>
            <tr>
                <td>35</td>
                <td>COPYING</td>
                <td colspan="14">API-Status auf "completed" setzen</td>
            </tr>
            <tr>
                <td>36</td>
                <td>COPYING</td>
                <td colspan="14">MQTT-Benachrichtigung senden</td>
            </tr>
            <tr>
                <td>37</td>
                <td>COPYING</td>
                <td colspan="14">Aufräumen erfolgreich abschließen</td>
            </tr>
            <tr>
                <td>38</td>
                <td>COMPLETED</td>
                <td colspan="14">State-Übergang zu COMPLETED</td>
            </tr>
            <tr>
                <td>39</td>
                <td>COMPLETED</td>
                <td colspan="14">Kurze Pause</td>
            </tr>
            <tr>
                <td>40</td>
                <td>WAITING_FOR_REMOVAL</td>
                <td colspan="14">Warte auf Medium-Entfernung</td>
            </tr>
            <tr>
                <td>41</td>
                <td>IDLE</td>
                <td colspan="14">Medium entfernt</td>
            </tr>
            <tr>
                <td>42</td>
                <td>IDLE</td>
                <td colspan="14">Zurück zu WAITING_FOR_MEDIA</td>
            </tr>
            <tr>
                <td>43</td>
                <td>SHUTDOWN</td>
                <td colspan="1" rowspan="2">&nbsp;</td>
                <td colspan="14">WEB-Service beenden</td>
            </tr>
            <tr>
                <td>44</td>
                <td>SHUTDOWN</td>
                <td colspan="14">Service beenden</td>
            </tr>
        </tbody>
    </table>

    <h2>Ausgabe-Dateien (OUTPUT_DIR)</h2>
    
    <table>
        <thead>
            <tr>
                <th>Disc-Typ</th>
                <th>Ausgabe-Ordner</th>
                <th>Dateien</th>
                <th>Beschreibung</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="data-disc"><b>Daten-Disc</b></td>
                <td>OUTPUT_DIR/data/</td>
                <td>
                    <div class="output-files">disc_label.iso</div>
                    <div class="output-files">disc_label.md5</div>
                    <div class="output-files">disc_label.log</div>
                </td>
                <td>
                    <div>ISO (Bit-für-Bit Kopie)</div>
                    <div>MD5-Checksumme</div>
                    <div>ddrescue oder dd Output</div>
                </td>
            </tr>
            <tr>
                <td class="audio-cd"><b>Audio-CD</b></td>
                <td>OUTPUT_DIR/audio/</td>
                <td>
                    <div class="output-files">artist_album.iso</div>
                    <div class="output-files">artist_album.md5</div>
                    <div class="output-files">artist_album.log</div>
                    <div class="output-files">artist_album.nfo</div>
                    <div class="output-files">artist_album-thumb.jpg</div>
                </td>
                <td>
                    <div>ISO mit MP3s + Jellyfin-Struktur</div>
                    <div>MD5-Checksumme</div>
                    <div>cdparanoia + lame Output</div>
                    <div>Archiv-Metadaten (einfach)</div>
                    <div>Cover-Thumbnail</div>
                </td>
            </tr>
            <tr>
                <td class="dvd-video"><b>DVD-Video</b></td>
                <td>OUTPUT_DIR/dvd/</td>
                <td>
                    <div class="output-files">disc_label.iso</div>
                    <div class="output-files">disc_label.md5</div>
                    <div class="output-files">disc_label.log</div>
                    <div class="output-files">disc_label.nfo</div>
                    <div class="output-files">disc_label-thumb.jpg</div>
                </td>
                <td>
                    <div>ISO mit VIDEO_TS/ (entschlüsselt)</div>
                    <div>MD5-Checksumme</div>
                    <div>dvdbackup + genisoimage Output</div>
                    <div>Archiv-Metadaten (falls TMDB)</div>
                    <div>Cover (falls TMDB)</div>
                </td>
            </tr>
            <tr>
                <td class="bd-video"><b>Blu-ray Video</b></td>
                <td>OUTPUT_DIR/bluray/</td>
                <td>
                    <div class="output-files">disc_label.iso</div>
                    <div class="output-files">disc_label.md5</div>
                    <div class="output-files">disc_label.log</div>
                    <div class="output-files">disc_label.nfo</div>
                </td>
                <td>
                    <div>ISO mit BDMV/ (Bit-für-Bit Kopie)</div>
                    <div>MD5-Checksumme</div>
                    <div>ddrescue Output</div>
                    <div>Archiv-Metadaten (falls TMDB)</div>
                </td>
            </tr>
        </tbody>
    </table>

    <h2>Zeitaufwand pro Disc-Typ</h2>
    
    <table>
        <thead>
            <tr>
                <th>Disc-Typ</th>
                <th>Medienerkennung</th>
                <th>Metadata-Abfrage</th>
                <th>User-Auswahl (max)</th>
                <th>Kopiervorgang</th>
                <th>MD5-Checksumme</th>
                <th>Gesamt (min)</th>
                <th>Gesamt (max)</th>
            </tr>
        </thead>
        <tbody>
            <tr class="audio-cd">
                <td><b>Audio-CD (12 Tracks)</b></td>
                <td>2-5s</td>
                <td>5-10s</td>
                <td>0-60s</td>
                <td>40-60 Min</td>
                <td>30s-2 Min</td>
                <td>~44 Min</td>
                <td>~63 Min</td>
            </tr>
            <tr class="dvd-video">
                <td><b>DVD-Video</b></td>
                <td>5-10s</td>
                <td>5-10s</td>
                <td>0-60s</td>
                <td>15-30 Min</td>
                <td>1-3 Min</td>
                <td>~17 Min</td>
                <td>~34 Min</td>
            </tr>
            <tr class="bd-video">
                <td><b>Blu-ray Video</b></td>
                <td>10-15s</td>
                <td>5-10s</td>
                <td>0-60s</td>
                <td>30-90 Min</td>
                <td>3-10 Min</td>
                <td>~34 Min</td>
                <td>~102 Min</td>
            </tr>
            <tr class="data-disc">
                <td><b>Daten-Disc (CD-ROM)</b></td>
                <td>2-5s</td>
                <td>-</td>
                <td>-</td>
                <td>5-10 Min</td>
                <td>10s-1 Min</td>
                <td>~6 Min</td>
                <td>~12 Min</td>
            </tr>
        </tbody>
    </table>

    <h2>API-Integration</h2>
    
    <table>
        <thead>
            <tr>
                <th>API-Datei</th>
                <th>Update-Punkte</th>
                <th>Inhalt</th>
                <th>Konsument</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>api/status.json</b></td>
                <td>Jeder State-Übergang (transition_to_state)</td>
                <td>status, disc_label, disc_type, timestamp</td>
                <td>Frontend (Echtzeit-Status)</td>
            </tr>
            <tr>
                <td><b>api/progress.json</b></td>
                <td>Während COPYING (Track- oder MB-basiert)</td>
                <td>percent, current, total, eta, timestamp</td>
                <td>Frontend (Fortschrittsbalken)</td>
            </tr>
            <tr>
                <td><b>api/attributes.json</b></td>
                <td>Start COPYING (init_copy_log)</td>
                <td>disc_label, disc_type, copy_method, total_tracks, iso_filename</td>
                <td>Frontend (Detailansicht)</td>
            </tr>
            <tr>
                <td><b>api/musicbrainz_releases.json</b></td>
                <td>Bei mehreren MusicBrainz Releases</td>
                <td>disc_id, track_count, releases[] (id, title, artist, date, cover_url)</td>
                <td>Python-Frontend (Release-Auswahl-Modal)</td>
            </tr>
            <tr>
                <td><b>api/musicbrainz_selection.json</b></td>
                <td>User-Auswahl oder Timeout</td>
                <td>status, selected_index, confidence, message, timestamp</td>
                <td>Bash (wait_for_metadata_selection)</td>
            </tr>
            <tr>
                <td><b>api/tmdb_results.json</b></td>
                <td>Bei mehreren TMDB Treffern</td>
                <td>disc_id, results[] (id, title, release_date, poster_path)</td>
                <td>Python-Frontend (Film-Auswahl-Modal)</td>
            </tr>
            <tr>
                <td><b>api/history.json</b></td>
                <td>Bei COMPLETED (cleanup_disc_operation)</td>
                <td>history[] (timestamp, disc_label, disc_type, iso_filename, success)</td>
                <td>Frontend (Verlauf-Tab)</td>
            </tr>
        </tbody>
    </table>

    <h2>Kritische Entscheidungspunkte</h2>
    
    <table>
        <thead>
            <tr>
                <th>Entscheidung</th>
                <th>Trigger</th>
                <th>Optionen</th>
                <th>Auswahl-Logik</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><b>Metadata BEFORE vs AFTER Copy</b></td>
                <td>Audio-CD erkannt</td>
                <td>
                    <div>1. BEFORE: User-Auswahl vor Rippen</div>
                    <div>2. AFTER: Rippen sofort, Metadata später</div>
                </td>
                <td>
                    <div><b>Aktuelle Strategie: BEFORE</b></div>
                    <div>✅ Disc-Label sofort korrekt</div>
                    <div>✅ MP3-Dateinamen mit Track-Titel</div>
                    <div>✅ Jellyfin-Struktur: /Artist/Album/</div>
                    <div>⚠️ User-Wartezeit vor Kopiervorgang</div>
                </td>
            </tr>
            <tr>
                <td><b>DVD: dvdbackup vs ddrescue</b></td>
                <td>DVD-Video erkannt</td>
                <td>
                    <div>1. dvdbackup: CSS-Entschlüsselung</div>
                    <div>2. ddrescue: Bit-für-Bit Kopie</div>
                </td>
                <td>
                    <div><b>select_copy_method():</b></div>
                    <div>✅ dvdbackup: Wenn libdvdcss verfügbar</div>
                    <div>⚠️ ddrescue: Fallback (kein CSS-Support)</div>
                    <div>⛔ Kein automatischer Fallback bei Fehler</div>
                </td>
            </tr>
            <tr>
                <td><b>Blu-ray: ddrescue vs dd</b></td>
                <td>BD-Video erkannt</td>
                <td>
                    <div>1. ddrescue: Robustes Kopieren</div>
                    <div>2. dd: Einfaches Kopieren</div>
                </td>
                <td>
                    <div><b>select_copy_method():</b></div>
                    <div>✅ ddrescue: Bevorzugt (Skip bei Lesefehlern)</div>
                    <div>⚠️ dd: Fallback (bricht bei Fehlern ab)</div>
                </td>
            </tr>
            <tr>
                <td><b>Fortschritts-Tracking</b></td>
                <td>COPYING State</td>
                <td>
                    <div>1. Track-basiert (Audio-CD)</div>
                    <div>2. MB-basiert (DVD/BD)</div>
                </td>
                <td>
                    <div><b>Audio-CD:</b> current = Track-Nummer (5/12)</div>
                    <div><b>DVD/BD:</b> current = Copied MB (4800/7050)</div>
                    <div>ETA: Geschätzt (4 Min/Track oder MB/s)</div>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="note">
        <h3>Hinweise</h3>
        <ul>
            <li><b>Metadata BEFORE Copy:</b> Seit Version 1.2.0 Standard-Strategie für Audio-CDs. User-Auswahl erfolgt VOR dem Rippen (max 60s Timeout).</li>
            <li><b>Kein Fallback:</b> copy_disc_to_iso() hat KEINEN automatischen Fallback bei Fehler. Gewählte Methode wird einmal versucht.</li>
            <li><b>Track-Count wichtig:</b> Muss VOR api_update_progress() in attributes.json gesetzt sein (sonst 0/0 Anzeige).</li>
            <li><b>Python-Integration:</b> ISO-Mounting & MP3-Counting noch in Python (www/app.py). Migration geplant (siehe PythonVsShell.md).</li>
            <li><b>State Machine:</b> Läuft endlos (24/7-Betrieb). Nach COMPLETED → WAITING_FOR_REMOVAL → IDLE → WAITING_FOR_MEDIA (Loop).</li>
        </ul>
    </div>

    <footer style="margin-top: 40px; padding: 20px; background-color: #34495e; color: white; text-align: center;">
        <p><b>disk2iso Prozessanalyse</b> - Erstellt: 28. Januar 2026</p>
        <p>GitHub Copilot (Claude Sonnet 4.5) - Automatisch generiert aus Codebase-Analyse</p>
    </footer>
</body>
</html>
