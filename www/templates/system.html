{% extends "base.html" %}

{% block content %}
    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <ul class="breadcrumb-list">
            <li>
                <a href="/"><img src="{{ url_for('static', filename='img/home.svg') }}" alt="" style="width:16px;height:16px;vertical-align:middle;margin-right:4px;">{{ t.NAV_HOME }}</a>
            </li>
            <li class="breadcrumb-separator">></li>
            <li class="current">{{ t.SYSTEM_TITLE }}</li>
        </ul>
    </nav>

    <!-- System Information Grid (2x1 Widgets) -->
    <div class="system-grid">
        <!-- System Info Widget (2x1) -->
        {% include 'widgets/systeminfo_widget_2x1_sysinfo.html' %}

        <!-- disk2iso Service Widget (2x1) -->
        {% include 'widgets/disk2iso_widget_2x1_status.html' %}
        
        <!-- Output Directory Widget (2x1) -->
        {% include 'widgets/systeminfo_widget_2x1_outputdir.html' %}
        
        <!-- Archiv Widget (2x1) -->
        {% include 'widgets/systeminfo_widget_2x1_archiv.html' %}
    </div>

    <!-- Software Dependencies (Modulare Widgets) -->
    <div class="card">
        <h2>
            <img src="{{ url_for('static', filename='img/package.svg') }}" alt="" style="width:20px;height:20px;vertical-align:middle;margin-right:6px;">{{ t.SYSTEM_CONFIG }}
            <button class="refresh-btn" onclick="refreshSystemInfo()" style="float: right;">
                <span id="refresh-icon"><img src="{{ url_for('static', filename='img/refresh.svg') }}" alt="" style="width:20px;height:20px;"></span>
                <span>{{ t.INDEX_REFRESH }}</span>
            </button>
        </h2>
        
        <div id="software-container">
            <!-- Core Dependencies (immer geladen) -->
            {% include 'widgets/systeminfo_widget_4x1_dependencies.html' %}
            
            <!-- Audio Module Dependencies (nur wenn Modul verfügbar) -->
            <!-- Widget wird dynamisch geladen via audio_widget_4x1_dependencies.js -->
            <div id="audio-dependencies-container"></div>
            
            <!-- DVD Module Dependencies (nur wenn Modul verfügbar) -->
            <!-- Widget wird dynamisch geladen via dvd_widget_4x1_dependencies.js -->
            <div id="dvd-dependencies-container"></div>
            
            <!-- Bluray Module Dependencies (nur wenn Modul verfügbar) -->
            <!-- Widget wird dynamisch geladen via bluray_widget_4x1_dependencies.js -->
            <div id="bluray-dependencies-container"></div>
            
            <!-- Metadata Provider Dependencies (nur wenn Modul verfügbar) -->
            <!-- Widget wird dynamisch geladen via musicbrainz/tmdb_widget_4x1_dependencies.js -->
            <div id="metadata-dependencies-container"></div>
            
            <!-- MQTT Module Dependencies (nur wenn Modul verfügbar) -->
            <!-- Widget wird dynamisch geladen via mqtt_widget_4x1_dependencies.js -->
            <div id="mqtt-dependencies-container"></div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/system.js') }}"></script>
    <script src="{{ url_for('static', filename='js/widgets/systeminfo_widget_2x1_sysinfo.js') }}"></script>
    <script src="{{ url_for('static', filename='js/widgets/disk2iso_widget_2x1_status.js') }}"></script>
    <script src="{{ url_for('static', filename='js/widgets/systeminfo_widget_2x1_outputdir.js') }}"></script>
    <script src="{{ url_for('static', filename='js/widgets/systeminfo_widget_2x1_archiv.js') }}"></script>
    
    <!-- Core Dependencies Widget (immer geladen) -->
    <script src="{{ url_for('static', filename='js/widgets/systeminfo_widget_4x1_dependencies.js') }}"></script>
    
    <!-- Module Dependency Widgets (TODO: Auto-Loading implementieren) -->
    <!-- Werden später über module-loader.js dynamisch geladen wenn Modul verfügbar -->
{% endblock %}
